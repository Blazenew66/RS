# RS 排名系统 - 运行指南

## 📋 目录
1. [基本运行方式](#基本运行方式)
2. [命令行参数说明](#命令行参数说明)
3. [运行示例](#运行示例)
4. [输出文件说明](#输出文件说明)
5. [常见问题](#常见问题)

---

## 🚀 基本运行方式

### 方式一：执行一次（推荐首次使用）

```bash
python -m rs_system.main
```

或者明确指定模式：

```bash
python -m rs_system.main --mode once
```

### 方式二：使用测试脚本（快速测试）

```bash
python test_rs_system.py
```

这会使用5只股票进行快速测试。

---

## 📝 命令行参数说明

### 主要参数

| 参数 | 说明 | 示例 |
|------|------|------|
| `--mode` | 运行模式：`once`（执行一次）或 `schedule`（定时执行） | `--mode once` |
| `--time` | 定时执行时间（格式：HH:MM），仅在 `schedule` 模式下有效 | `--time 16:00` |
| `--tickers` | 自定义股票代码列表（空格分隔） | `--tickers AAPL MSFT GOOGL` |
| `--no-csv` | 不保存 CSV 文件 | `--no-csv` |
| `--no-report` | 不打印控制台报告 | `--no-report` |
| `-h, --help` | 显示帮助信息 | `--help` |

---

## 💡 运行示例

### 示例 1：使用默认股票列表执行一次

```bash
python -m rs_system.main
```

**说明：**
- 使用 `config.py` 中配置的默认股票列表（约42只）
- 生成 CSV 文件和控制台报告
- 输出到 `output/` 目录

### 示例 2：自定义股票列表

```bash
python -m rs_system.main --tickers AAPL MSFT GOOGL AMZN TSLA
```

**说明：**
- 只计算指定的5只股票
- 适合快速测试或关注特定股票

### 示例 3：定时自动更新

```bash
# 每天 16:00（美东时间）自动执行
python -m rs_system.main --mode schedule

# 自定义执行时间（例如每天 17:00）
python -m rs_system.main --mode schedule --time 17:00
```

**说明：**
- 程序会持续运行，等待指定时间执行
- 如果是交易日，会立即执行一次
- 按 `Ctrl+C` 可停止

### 示例 4：只生成 CSV，不打印报告

```bash
python -m rs_system.main --no-report
```

### 示例 5：只打印报告，不保存 CSV

```bash
python -m rs_system.main --no-csv
```

### 示例 6：查看帮助信息

```bash
python -m rs_system.main --help
```

---

## 📂 输出文件说明

运行成功后，会在 `output/` 目录下生成：

### 1. `rs_rankings.csv`
排名结果 CSV 文件，包含以下字段：
- `ticker`: 股票代码
- `rs_raw`: RS 原始值（百分比）
- `rs_score`: RS 排名分数（1-99）
- `rank`: 排名（1 为最高）

**示例内容：**
```csv
ticker,rs_raw,rs_score,rank
NVDA,45.23,95,1
AAPL,32.15,88,2
MSFT,28.76,85,3
...
```

### 2. `rs_system.log`
详细执行日志，包括：
- 数据获取进度
- RS 计算过程
- 错误和警告信息
- 执行时间戳

---

## 🔧 常见问题

### Q1: 提示 "ModuleNotFoundError"？

**解决方案：**
```bash
pip install -r requirements.txt
```

### Q2: 数据获取失败（SSL 证书错误）？

**可能原因：**
- 网络连接问题
- SSL 证书验证失败
- yfinance 服务暂时不可用

**解决方案：**
1. 检查网络连接
2. 更新证书：`pip install --upgrade certifi`
3. 稍后重试

### Q3: 如何修改股票列表？

**方法1：修改配置文件**
编辑 `rs_system/config.py`，修改 `DEFAULT_TICKERS` 列表

**方法2：使用命令行参数**
```bash
python -m rs_system.main --tickers 股票1 股票2 股票3
```

**方法3：使用文件**
1. 创建股票列表文件（参考 `ticker_list_example.txt`）
2. 设置环境变量：`set TICKER_LIST_FILE=你的文件路径.txt`
3. 运行程序

### Q4: 程序运行很慢？

**原因：**
- 股票数量多（默认42只，每只需要获取2年数据）
- 网络速度限制
- yfinance API 限流

**优化建议：**
- 使用 `--tickers` 参数减少股票数量
- 在网络较好的时段运行
- 程序已内置请求延迟，避免过快请求

### Q5: 如何实现每日自动更新？

**方法1：使用 schedule 模式**
```bash
python -m rs_system.main --mode schedule --time 16:00
```

**方法2：使用 Windows 任务计划程序**
1. 打开"任务计划程序"
2. 创建基本任务
3. 触发器：每天指定时间
4. 操作：启动程序
5. 程序：`python`
6. 参数：`-m rs_system.main`

**方法3：使用 cron（Linux/Mac）**
```bash
# 编辑 crontab
crontab -e

# 添加任务（每天16:00执行）
0 16 * * 1-5 cd /path/to/RS && python -m rs_system.main
```

---

## 📊 运行流程

```
1. 启动程序
   ↓
2. 加载股票列表（默认或自定义）
   ↓
3. 获取股票历史数据（yfinance）
   ↓
4. 计算每只股票的 RS 原始值
   ↓
5. 对所有股票进行排名（1-99）
   ↓
6. 生成 CSV 文件
   ↓
7. 打印控制台报告
   ↓
8. 完成
```

---

## 🎯 快速开始

**第一次运行：**
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行测试（5只股票）
python test_rs_system.py

# 3. 正式运行（全部股票）
python -m rs_system.main
```

**日常使用：**
```bash
# 每天运行一次
python -m rs_system.main

# 或设置定时任务
python -m rs_system.main --mode schedule --time 16:00
```

---

## 📞 获取帮助

- 查看帮助：`python -m rs_system.main --help`
- 查看日志：`output/rs_system.log`
- 查看文档：`README.md` 和 `QUICKSTART.md`




